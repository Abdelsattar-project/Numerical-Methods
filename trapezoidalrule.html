
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Trapezoidal Rule</title>
    <link rel="shortcut icon" href="#" />
    <style>
        #TrapezoidalValues{
            text-align: center;
        }
    </style>
</head>
<body>
<form id="TrapezoidalValues">
    <h2>Trapezoidal</h2>
    <div class="formBox">
        <label for="title">Enter the function</label>
        <input type="text" id="Fn" placeholder="F(x)" pattern="[0-9xX\*\+\(\)\/\.\^\-]." title="please enter a proper equation"  required />
    </div> <!-- makes an input text field. the user will enter Fn = function to solve here-->
    <br />   <!-- adds a line break. بيسيب سطر-->

    <div class="formBox">
        <label for="title">Enter the Upper Bound</label>
        <input type="number" id="UpBound" placeholder="0" required />
    </div>  <!--input text field, the user will enter the UpBound = upper bound for the interval-->
    <br />

    <div class="formBox">
        <label for="title">Enter the Lower Bound</label>
        <input type="number" id="LowBound" placeholder="0" required />
    </div>  <!--input text field asking for LowBound = lower bound of the interval-->
    <br />

    <div class="formBox">
        <label for="title">Enter the no. if intervals</label>
        <input type="number" min="1" id="Interval" placeholder="0" required />
    </div> <!--input text field for n= number of intervals-->
    <br />

    <div class="formBox">
        <button type="submit" onclick="Trapezoidal();">Evaluate</button>
    </div>   <!-- creates a button, when the user presses it, it solves the equation-->

</form>
<script>
    
    const TrapezoidalValues = document.getElementById('TrapezoidalValues')
    TrapezoidalValues.addEventListener('submit', (ev) => {

        //stops form from submitting & refreshing the page upon clicking the button Evaluate & displays error message first if there is an error
        if (document.getElementById('UpBound').value <= document.getElementById('LowBound').value) {
            // messages.push('Upper bound cannot be smaller than lower bound')
            alert("Upper bound cannot be smaller than lower bound")
        }
    })

    function Trapezoidal() {

        let Fx = document.getElementById('Fn').value
        let Up = document.getElementById('UpBound').value
        let Low = document.getElementById('LowBound').value
        let IN= document.getElementById('Interval').value
        let h = (Up - Low) / IN;
        h = h.toFixed(4)
        let Sum = calc(Fx, x=Up) + calc(Fx, x=Low);
        document.write(Sum)
        let j = 1*(Low + h);
        // document.write(j)
        for (let i = 1; i <= IN; i++) {
            j += 1 * h * i;
            Sum += (h / 2 * 2 * calc(Fx, x = j));
        }

        Sum = Sum.toFixed(4);
        document.write('The area is approximately ', Sum);

    }

</script>
</body>
</html>
